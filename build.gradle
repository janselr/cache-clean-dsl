group 'com.jvra.ocache'
version '1.0'

def artifactId  = 'es-dsl-cache'

apply plugin: 'maven'
apply plugin: 'maven-publish'
apply from: './libraries.gradle'
apply plugin: 'groovy'

repositories {
    mavenLocal()
    mavenCentral()
}

uploadArchives {
    repositories {
        mavenDeployer {
            mavenLocal()
        }
    }
}

publishing {
    publications{
        maven(MavenPublication){
            groupId group
            groupId artifactId
            version version

            from components.java
        }
    }
}

dependencies{
    compile libs.moduleConfig
    compile libs.elasticSearch
    compile libs.spock
    compile libs.groovy
    compile libs.gson
    compile libs.log4j
    compile libs.gearman
    testCompile libs.groovy
    testCompile libs.spock
}

jar{
    exclude 'com/jvra/ocache/debug/**'
}

sourceSets {
    main {
        java { srcDirs =[] }    // no source dirs for the java compiler
        groovy { srcDir "src" exclude '**/test/**' }  // compile everything in src/ with groovy
    }
}
